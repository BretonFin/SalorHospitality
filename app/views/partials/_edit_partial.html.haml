.partial{ :id => "partial_#{ partial.id }", :partial_id => "#{ partial.id }", :model_id => "#{ model_id }", :type => 'partial', :style => "left: #{ partial.left }px; top: #{ partial.top }px" }
  %img{ :id => "partial_for_article_#{ partial.id }", :src => '/images/drag_handle.png', :style => 'cursor:true;' }
  %select{ :id => "presentation_for_partial_#{ partial.id }", :class => 'presentation_for_partial', :name => 'partial[presentation_id]' }
    = options_from_collection_for_select presentations, 'id', 'name', partial.presentation_id  
  %br
  %span{ :id => "html_for_partial_#{ partial.id }" }= raw markup
  - if partial.presentation.model == 'Presentation'
    %textarea{ :id => "textbox_for_partial_#{ partial.id }" }= partial.blurb
 
  
:javascript

  $('#partial_#{ partial.id }').draggable({
    handle: 'handle_for_partial_#{ partial.id }',
    revert: false
  });

  $("#presentation_for_partial_#{ partial.id }").change( function(){
    $.ajax({
      type: 'PUT',
      url: "/partials/#{ partial.id }",
      data: "partial[presentation_id]=" + $("#presentation_for_partial_#{ partial.id }").val()
    });
  });
  
  $("#partial_#{ partial.id }").mouseover( function(){
    $("#presentation_for_partial_#{ partial.id }").show();
  });

  
- if partial.presentation.model == 'Presentation'
  :javascript
    $("#html_for_partial_#{ partial.id }").click( function(){
      $(this).hide();
      $("#textbox_for_partial_#{ partial.id }").show();
      $("#textbox_for_partial_#{ partial.id }").focus();    
    });
    
    $("#textbox_for_partial_#{ partial.id }").blur( function(){
      $("#textbox_for_partial_#{ partial.id }").hide();
      $("#html_for_partial_#{ partial.id }").show();
      $.ajax({
        type: 'PUT',
        url: "/partials/#{ partial.id }",
        data: "partial[blurb]=" + $(this).val()
      });
    });
