- index = /article\[quantities_attributes\]\[(.*)\]/.match(f.object_name)[1]
- id = f.object.id
%li{ :id => "quantity_#{ id }" }
  %span.handle
  - unless f.object.new_record?
    %span.label= f.label('active', Quantity.human_attribute_name(:active))
    %span.input_fields= f.check_box :active
  %span.label= f.label :prefix, Quantity.human_attribute_name(:prefix)
  %span.input_fields
    = f.text_field :prefix, :class => 'prefix'
    %span.display_keyboard{ :id => "article_quantities_attributes_#{ index }_prefix_display_keyboard" }
  %span.label= f.label :postfix, Quantity.human_attribute_name(:postfix)
  %span.input_fields
    = f.text_field :postfix, :class => 'postfix'
    %span.display_keyboard{ :id => "article_quantities_attributes_#{ index }_postfix_display_keyboard" }
  %span.label= f.label :price, Quantity.human_attribute_name(:price)
  %span.input_fields
    = f.text_field(:price, :class => 'price')
    %span.display_keyboard{ :id => "article_quantities_attributes_#{ index }_price_display_keyboard" }

  - unless f.object.new_record?
    %span.link{ :onclick => "$('#article_quantities_attributes_#{ index }_hidden').val(1); $('#quantity_#{ id }').hide();" }= Quantity.human_attribute_name(:hidden)

:javascript
  $('#article_quantities_attributes_#{ index }_prefix').keyboard( {openOn: '' } );
  $('#article_quantities_attributes_#{ index }_prefix_display_keyboard').click(function(){ $('#article_quantities_attributes_#{ index }_prefix').getkeyboard().reveal(); });
  $('#article_quantities_attributes_#{ index }_postfix').keyboard( {openOn: '' } );
  $('#article_quantities_attributes_#{ index }_postfix_display_keyboard').click(function(){ $('#article_quantities_attributes_#{ index }_postfix').getkeyboard().reveal(); });
  $('#article_quantities_attributes_#{ index }_price').keyboard( {openOn: '', layout: 'num' } );
  $('#article_quantities_attributes_#{ index }_price_display_keyboard').click(function(){ $('#article_quantities_attributes_#{ index }_price').getkeyboard().reveal(); });
