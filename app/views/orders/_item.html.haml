-# The generated HTML code of this partial is inserted into the JS code of the add_item_link helper
-# Note that the statement 'item' represents the name of this partial

- frm.fields_for :items, item do |f|
  - nested_attribute_id = /order\[items_attributes\]\[(.*)\]/.match(f.object_name)[1]

  - wert = "selectWert(document.itemform.order_items_attributes_xxx#{ nested_attribute_id }_article_id)"

  - onselectchange = "function selectWert(sObj) { with (sObj) return options[selectedIndex].value;} $('quantities_#{ nested_attribute_id }').insert(#{ wert });"

  %td
    %select{ :id => "order_items_attributes_xxx#{ nested_attribute_id }_count", :name => "order[items_attributes][xxx#{ nested_attribute_id }][count]" }
      = options_for_select MyGlobals::predefined_count, 1

  %td{ :id => "item_sum_#{ nested_attribute_id }" }

  %td
    %select{ :id => "order_items_attributes_xxx#{ nested_attribute_id }_article_id", :name => "order[items_attributes][xxx#{ nested_attribute_id }][article_id]", :onchange => "#{ onselectchange }" }
      %option{ :value => '' }
      = options_from_collection_for_select cat.articles_in_menucard, :id, :name_description


  %td{ :id => "quantities_#{ nested_attribute_id }" }


  %td
    %select{ :id => "order_items_attributes_xxx#{ nested_attribute_id }_cost_center_id", :name => "order[items_attributes][xxx#{ nested_attribute_id }][cost_center_id]" }
      = options_from_collection_for_select cc, :id, :name


  %td
    %input{ :id => "order_items_attributes_xxx#{ nested_attribute_id }_partial_order", :type => 'checkbox', :value => '1', :name => "order[items_attributes][xxx#{ nested_attribute_id }][partial_order]" }
    %input{ :id => "order_items_attributes_xxx#{ nested_attribute_id }_sort", :type => 'hidden', :value => 'yyy', :name => "order[items_attributes][xxx#{ nested_attribute_id }][sort]" }
